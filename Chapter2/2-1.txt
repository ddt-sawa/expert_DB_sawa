演習 2-1　データベースサーバーのクラスタリング構成

データベースの信頼性と性能を高めるための物理設計として、本章ではRAIDについて学びました。
このほかにも、システム全体としての信頼性と性能を向上させる方法として「クラスタリング」という機能が存在します。
一般的に、サーバーのクラスタリング構成にはどのような形態がありうるか、調べてください。

サーバーにクラスタリング構成は、実現したい目的について2つに大別することが可能であり、
高可用性を実現するHAクラスタリング、高性能を実現する不可分散クラスタリングに分けられる。

 HAクラスタリング構成として最も基本的なものは、Active/Standby構成である。
一つのアクティブサーバー上でアプリケーションを実行している間、複数個のバックアップサーバー
が異常事態に備えて待機を行う。万が一アクティブサーバーに障害が発生した際は、現アクティブサーバーを
バックアップサーバーに切り替え、バックアップサーバーのどれか一つをアクティブサーバーとすることによって対処する。
 Active/Standby方式に対して、待機中のバックアップサーバーに別の仕事を持たせたものがActive/Active構成となる。
アクティブサーバーに障害が発生した場合、バックアップサーバーが代理を務めるのはActive/Standby構成と同様であるが、
待機中に別仕事を行えるためパフォーマンス向上が見込める点で優れているといえる。
 Active/Standbyから派生した構成の2つ目として挙げられるのが、N対1スタンバイ方式である。
Active/Standby構成では一つのアクティブサーバーに対して複数個のバックアップサーバー用意しなければならないため
コストが高くつくのが難点であったが、N対1スタンバイ方式では複数のアクティブサーバーに対して
一つの待機系サーバーが監視を行うため、稼働中サーバーを増やしコストを低減することが可能になる。

 負荷分散クラスタリングとして第一に挙げられるのは、複数のノードに対しロードバランサーと呼ばれる負荷分散装置が
処理を順番に振り分けるラウンドロビン方式である。複数のノードで単一の処理を行うことができるので、
単一ノードのみで処理を行う場合よりパフォーマンスが向上する。
 これに対し、ノードごとに優先順位を設定した後に処理を振り分ける手法を重みづけラウンドロビン方式という。
重みづけラウンドロビン方式では処理速度の早いノードに対して優先的にタスクを振り分けることができるので、
単純なラウンドロビン方式よりもパフォーマンスが向上する。
 順番に処理を振り分ける各種ラウンドロビン方式に対して、最も負荷の少ないノードを自動的に
判断して処理を振り分けることにより更なるパフォーマンス向上を望める手法がダイナミック負荷分散である。
しかしこの手法を採択する場合、各サーバーを監視するモニターが必要になるというデメリットも存在する。
